import{e as N,B as P,n as m,D as n,S as T,T as j,y as q,E as A,o as t,c as a,g as B,L,a as o,t as I,F as c,G as d,d as v,h as f,i as w,l as O,m as V,_ as D}from"./index-CFO58RnV.js";const r=h=>(O("data-v-b436b747"),h=h(),V(),h),F={class:"search"},$={key:0,class:"fill-page"},G={key:1,class:"fill-page"},J=r(()=>o("h1",null,"Something went wrong",-1)),M={class:"top flex gap-8"},Y={class:"top min-w-max"},z=r(()=>o("h2",null,"Top Result",-1)),H={key:0,class:"list songs flex-1"},K={class:"flex justify-between items-center"},Q=r(()=>o("h2",null,"Songs",-1)),U={class:"flex flex-wrap flexibleSearchResults"},W={key:0,class:"list flex-1 min-w-[40vw] artists"},X=r(()=>o("h2",null,"Artists",-1)),Z={key:1,class:"list flex-1 min-w-[40vw] playlists"},ee=r(()=>o("h2",null,"Playlists",-1)),se={key:2,class:"list flex-1 min-w-[40vw] albums"},te=r(()=>o("h2",null,"Albums",-1)),le=N({__name:"index",setup(h){const R=P(),y=m(!0),_=m(null),p=m(!1),u=m(null),C=n(()=>{var e,s;return(s=(e=u.value)==null?void 0:e.items)==null?void 0:s[0]}),i=n(()=>{var e,s;return(s=(e=u.value)==null?void 0:e.items)==null?void 0:s.filter(l=>l.type==="song")}),g=n(()=>{var e,s;return(s=(e=u.value)==null?void 0:e.items)==null?void 0:s.filter(l=>l.type==="artist")}),x=n(()=>{var e,s;return(s=(e=u.value)==null?void 0:e.items)==null?void 0:s.filter(l=>l.type==="playlist")}),S=n(()=>{var e,s;return(s=(e=u.value)==null?void 0:e.items)==null?void 0:s.filter(l=>l.type==="album")}),k=n(()=>R.params.query),E=n(()=>[...T,...j]),b=async()=>{y.value=!0,_.value=null;const e=await fetch("/api/search",{method:"POST",body:JSON.stringify({query:k.value,scope:E.value})});if(y.value=!1,!e.ok){_.value=await e.text();return}const s=await e.json();u.value=s};return q(b),A(k,b),(e,s)=>(t(),a("div",F,[y.value?(t(),a("div",$,[B(L)])):_.value?(t(),a("div",G,[J,o("p",null,I(_.value),1)])):(t(),a(c,{key:2},[o("div",M,[o("div",Y,[z,B(d,{item:C.value,large:""},null,8,["item"])]),i.value.length?(t(),a("div",H,[o("div",K,[Q,i.value.length>4?(t(),a("span",{key:0,class:"more cursor-pointer text-muted hover:text-primary text-sm uppercase",onClick:s[0]||(s[0]=l=>p.value=!p.value)},I(p.value?"Show less":`Show all ${i.value.length} songs`),1)):v("",!0)]),(t(!0),a(c,null,f(p.value?i.value:i.value.slice(0,4),l=>(t(),w(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0)]),o("div",U,[g.value.length?(t(),a("div",W,[X,(t(!0),a(c,null,f(g.value,l=>(t(),w(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0),x.value.length?(t(),a("div",Z,[ee,(t(!0),a(c,null,f(x.value,l=>(t(),w(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0),S.value.length?(t(),a("div",se,[te,(t(!0),a(c,null,f(S.value,l=>(t(),w(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0)])],64))]))}}),oe=D(le,[["__scopeId","data-v-b436b747"]]);export{oe as default};
